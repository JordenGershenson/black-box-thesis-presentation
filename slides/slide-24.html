      <div class="slide bg-surface" id="slide-24">
        <div class="title-zone">
          <p style="font-size: 11px; color: #718096; margin-bottom: 4px;">BACKUP</p>
          <h1 style="font-size: 24px;">Algorithm: Detailed Pseudocode</h1>
        </div>
        
        <div class="content-zone">
          <div class="row gap-lg fill">
            <!-- Pseudocode -->
            <div class="col" style="flex: 1.2;">
              <div style="background: #1a1a2e; padding: 14px; border-radius: 8px; height: 100%; overflow: hidden;">
                <pre style="font-family: 'Courier New', monospace; font-size: 9px; color: #e2e8f0; margin: 0; line-height: 1.5; white-space: pre-wrap;"><span style="color: var(--accent);">ALGORITHM:</span> Mass-Preserving Reverse Rollout

<span style="color: var(--success);">Input:</span> focal_pixel (z₀, h₀, w₀), attention_weights A
<span style="color: var(--success);">Output:</span> contribution_map M

<span style="color: #718096;">// Initialize</span>
M ← zeros(8, 181, 360)
M[z₀, h₀, w₀] ← 1.0

<span style="color: #718096;">// Process layers in reverse</span>
<span style="color: var(--warning);">for</span> layer L in [3, 2, 1, 0]:
    
    <span style="color: #718096;">// Resample if resolution changes</span>
    <span style="color: var(--warning);">if</span> L crosses resolution boundary:
        M ← resample(M)
    
    <span style="color: #718096;">// Process blocks in reverse</span>
    <span style="color: var(--warning);">for</span> block b in layer L (reverse):
        shifted ← (b mod 2 == 1)
        M' ← zeros_like(M)
        
        <span style="color: #718096;">// Redistribute mass</span>
        <span style="color: var(--warning);">for</span> each pixel (z,h,w) where M[z,h,w] > 0:
            m ← M[z,h,w]
            win_info ← get_window(z, h, w, shifted)
            attn_row ← A[layer, block, win_info]
            
            <span style="color: #718096;">// Handle skip connections</span>
            attn_row ← (1-β)·attn_row + β·I
            
            <span style="color: #718096;">// Scatter to contributors</span>
            <span style="color: var(--warning);">for</span> k in 0..143:
                (zk, hk, wk) ← key_to_global(k, win_info)
                M'[zk, hk, wk] += m · attn_row[k]
        
        M ← normalize(M')

<span style="color: var(--success);">return</span> M</pre>
              </div>
            </div>
            
            <!-- Key operations -->
            <div class="col gap" style="flex: 0.8;">
              <div style="background: #e8f4f8; padding: 12px; border-radius: 6px;">
                <p style="font-size: 11px; font-weight: 600; color: var(--primary); margin-bottom: 6px;">Skip Connection Handling</p>
                <p style="font-size: 10px; color: var(--muted-fg); font-family: 'Courier New', monospace;">P = (1-β)A + βI</p>
                <p style="font-size: 9px; color: #718096; margin-top: 4px;">Accounts for residual connections in architecture</p>
              </div>
              
              <div class="card">
                <p style="font-size: 11px; font-weight: 600; color: var(--primary); margin-bottom: 6px;">Window Size</p>
                <p style="font-size: 10px; color: var(--muted-fg);">12 × 6 × 2 (lon × lat × pressure)<br>= 144 tokens per window</p>
              </div>
              
              <div class="card">
                <p style="font-size: 11px; font-weight: 600; color: var(--primary); margin-bottom: 6px;">Resolution</p>
                <p style="font-size: 10px; color: var(--muted-fg);">Full: 181 × 360<br>Half: 91 × 180 (middle layers)</p>
              </div>
              
              <div class="card">
                <p style="font-size: 11px; font-weight: 600; color: var(--primary); margin-bottom: 6px;">Compute Time</p>
                <p style="font-size: 10px; color: var(--muted-fg);">~45 sec per focal point (A100 GPU)<br>~8 min (CPU fallback)</p>
              </div>
            </div>
          </div>
        </div>
      </div>